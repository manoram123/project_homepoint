{% extends 'layout.html' %}
{% load static %}
{% block content %}
{% include 'navbar.html' %}

<!-- message alert -->
  {% include 'messages.html' %}
<!-- message alert -->

    <div class="container mx-auto">
      <div class="cotainer col-xl-6 mx-auto col-md-8 shadow border rounded my-5 px-3 py-3">
        <div class="poster d-flex my-3">
          <div class="poster-image rounded-circle" style = "background: url('/{{request.user.profile.image}}'); background-size: cover;"></div>
          <div class="poster-text mx-2">
            <p class = 'm-0'>{{request.user.first_name}}</p>
            <small class = 'poster-small'>Edit Listing Home</small>
          </div>
        </div>
        <form id = 'p-form' class="c-form" action="" method="post" enctype="multipart/form-data">
          {% csrf_token %}
          <small class = 'm-0'>Photoes <small class = 'font-weight-bold'>- You can add upto 6 photoes</small></small>
          <div class="container mx-auto px-0 row border rounded">
            {% if home.image1 %}
            <div class="col-md-3 my-3 col-sm-4">
              <input class = 'd-none' id = 'image1' onchange = 'showPreview(event, 1)'  type="file" name="image_1" aria-describedby="image_1" accept="image/*">
              <div id = 'image-preview1' class="add-image rounded d-block mx-auto" style="background: url('/{{home.image1}}'); background-size: cover;">
                <button id = 'del1' onclick = "removeImage(1)" class = 'fas fa-times-circle btn ml-auto p-1 cancel-btn' style = 'display: block;' type="button" name="button"></button>
                <button id = 'add1' onclick = "clickDefault(1)" class = 'custom-add first-slot mx-auto my-2 btn' style = 'display: none;' type="button" name="button"> <i class = 'fas fa-file-image'></i><i class = 'fas fa-plus'></i> </button>
              </div>
            </div>
            {% else %}
            <div class="col-md-3 my-3 col-sm-4 slot1 d-block">
              <input class = 'd-none' id = 'image1' onchange = 'showPreview(event, 1)' type="file" name="image_1">
              <div id = 'image-preview1' class="add-image rounded d-block mx-auto">
                <button id = 'del1' onclick = "removeImage(1)" class = 'fas fa-times-circle btn ml-auto p-1 cancel-btn' type="button" name="button"></button>
                <button id = 'add1' onclick = "clickDefault(1)" class = 'custom-add mx-auto my-2 btn' type="button" name="button"> <i class = 'fas fa-file-image'></i><i class = 'fas fa-plus'></i> </button>
              </div>
            </div>
            {% endif %} 
            

            {% if home.image2 %}
            <div class="col-md-3 my-3 col-sm-4 slot1 d-block">
              <input class = 'd-none' id = 'image2' onchange = 'showPreview(event, 2)' type="file" name="image2" value="{{home.image2}}">
              <input class = 'd-none' id = 'image2_value' hidden type="text" name="image2_value" value="{{home.image2}}">
              <div id = 'image-preview2' class="add-image rounded d-block mx-auto" style="background: url('/{{home.image2}}'); background-size: cover;">
                <button id = 'del2' onclick = "removeImage(2)" class = 'fas fa-times-circle btn ml-auto p-1 cancel-btn' style = 'display: block;' type="button" name="button"></button>
                <button id = 'add2' onclick = "clickDefault(2)" class = 'custom-add mx-auto my-2 btn' style = 'display: none;' type="button" name="button"> <i class = 'fas fa-file-image'></i><i class = 'fas fa-plus'></i> </button>
              </div>
            </div>
            {% else %}
            <div class="col-md-3 my-3 col-sm-4 slot1 d-block">
              <input class = 'd-none' id = 'image2' onchange = 'showPreview(event, 2)' type="file" name="image2">
              <div id = 'image-preview2' class="add-image rounded d-block mx-auto">
                <button id = 'del2' onclick = "removeImage(2)" class = 'fas fa-times-circle btn ml-auto p-1 cancel-btn' type="button" name="button"></button>
                <button id = 'add2' onclick = "clickDefault(2)" class = 'custom-add mx-auto my-2 btn' type="button" name="button"> <i class = 'fas fa-file-image'></i><i class = 'fas fa-plus'></i> </button>
              </div>
            </div>
            {% endif %}

            {% if home.image3 %}
            <div class="col-md-3 my-3 col-sm-4 slot2 d-block">
              <input class = 'd-none' id = 'image3' onchange = 'showPreview(event, 3)' type="file" name="image3" value="{{home.image3}}">
              <input class = 'd-none' id = 'image3_value' hidden type="text" name="image3_value" value="{{home.image3}}">
              <div id = 'image-preview3' class="add-image rounded d-block mx-auto" style="background: url('/{{home.image3}}'); background-size: cover;">
                <button id = 'del3' onclick = "removeImage(3)" class = 'fas fa-times-circle btn ml-auto p-1 cancel-btn' style = 'display: block;' type="button" name="button"></button>
                <button id = 'add3' onclick = "clickDefault(3)" class = 'custom-add mx-auto my-2 btn' style = 'display: none;' type="button" name="button"> <i class = 'fas fa-file-image'></i><i class = 'fas fa-plus'></i> </button>
              </div>
            </div>
            {% else %}
            <div class="col-md-3 my-3 col-sm-4 slot2 d-block">
              <input class = 'd-none' id = 'image3' onchange = 'showPreview(event, 3)' type="file" name="image3" value="">
              <div id = 'image-preview3' class="add-image rounded d-block mx-auto">
                <button id = 'del3' onclick = "removeImage(3)" class = 'fas fa-times-circle btn ml-auto p-1 cancel-btn' type="button" name="button"></button>
                <button id = 'add3' onclick = "clickDefault(3)" class = 'custom-add mx-auto my-2 btn' type="button" name="button"> <i class = 'fas fa-file-image'></i><i class = 'fas fa-plus'></i> </button>
              </div>
            </div>
            {% endif %}

            {% if home.image4 %}
            <div class="col-md-3 my-3 col-sm-4 slot3 d-block">
              <input class = 'd-none' id = 'image4' onchange = 'showPreview(event, 4)' type="file" name="image4" value="{{home.image4}}">
              <input class = 'd-none' id = 'image4_value' hidden type="text" name="image4_value" value="{{home.image4}}">
              <div id = 'image-preview4' class="add-image rounded d-block mx-auto" style="background: url('/{{home.image4}}'); background-size: cover;">
                <button id = 'del4' onclick = "removeImage(4)" class = 'fas fa-times-circle btn ml-auto p-1 cancel-btn' style = 'display: block;' type="button" name="button"></button>
                <button id = 'add4' onclick = "clickDefault(4)" class = 'custom-add mx-auto my-2 btn' style = 'display: none;' type="button" name="button"> <i class = 'fas fa-file-image'></i><i class = 'fas fa-plus'></i> </button>
              </div>
            </div>
            {% else %}
            <div class="col-md-3 my-3 col-sm-4 slot3 d-block">
              <input class = 'd-none' id = 'image4' onchange = 'showPreview(event, 4)' type="file" name="image4" value="">
              <div id = 'image-preview4' class="add-image rounded d-block mx-auto">
                <button id = 'del4' onclick = "removeImage(4)" class = 'fas fa-times-circle btn ml-auto p-1 cancel-btn' type="button" name="button"></button>
                <button id = 'add4' onclick = "clickDefault(4)" class = 'custom-add mx-auto my-2 btn' type="button" name="button"> <i class = 'fas fa-file-image'></i><i class = 'fas fa-plus'></i> </button>
              </div>
            </div>
            {% endif %}

            {% if home.image5 %}
            <div class="col-md-3 my-3 col-sm-4 slot4 d-block">
              <input class = 'd-none' id = 'image5' onchange = 'showPreview(event, 5)' type="file" name="image5" value="{{home.image5}}">
              <input class = 'd-none' id = 'image5_value' hidden type="text" name="image5_value" value="{{home.image5}}">
              <div id = 'image-preview5' class="add-image rounded d-block mx-auto" style="background: url('/{{home.image5}}'); background-size: cover;">
                <button id = 'del5' onclick = "removeImage(5)" class = 'fas fa-times-circle btn ml-auto p-1 cancel-btn' style = 'display: block;' type="button" name="button"></button>
                <button id = 'add5' onclick = "clickDefault(5)" class = 'custom-add mx-auto my-2 btn' style = 'display: none;' type="button" name="button"> <i class = 'fas fa-file-image'></i><i class = 'fas fa-plus'></i> </button>
              </div>
            </div>
            {% else %}
            <div class="col-md-3 my-3 col-sm-4 slot4 d-block">
              <input class = 'd-none' id = 'image5' onchange = 'showPreview(event, 5)' type="file" name="image5" value="">
              <div id = 'image-preview5' class="add-image rounded d-block mx-auto">
                <button id = 'del5' onclick = "removeImage(5)" class = 'fas fa-times-circle btn ml-auto p-1 cancel-btn' type="button" name="button"></button>
                <button id = 'add5' onclick = "clickDefault(5)" class = 'custom-add mx-auto my-2 btn' type="button" name="button"> <i class = 'fas fa-file-image'></i><i class = 'fas fa-plus'></i> </button>
              </div>
            </div>
            {% endif %}

            {% if home.image6 %}
            <div class="col-md-3 my-3 col-sm-4 slot5 d-block">
              <input class = 'd-none' id = 'image6' onchange = 'showPreview(event, 6)' type="file" name="image6" value="{{home.image}}">
              <input class = 'd-none' id = 'image6_value' hidden type="text" name="image6_value" value="{{home.image6}}">
              <div id = 'image-preview6' class="add-image rounded d-block mx-auto" style="background: url('/{{home.image6}}'); background-size: cover;">
                <button id = 'del6' onclick = "removeImage(6)" class = 'fas fa-times-circle btn ml-auto p-1 cancel-btn' style = 'display: block;' type="button" name="button"></button>
                <button id = 'add6' onclick = "clickDefault(6)" class = 'custom-add mx-auto my-2 btn' style = 'display: none;' type="button" name="button"> <i class = 'fas fa-file-image'></i><i class = 'fas fa-plus'></i> </button>
              </div>
            </div>
            {% else %}
            <div class="col-md-3 my-3 col-sm-4 slot5 d-block">
              <input class = 'd-none' id = 'image6' onchange = 'showPreview(event, 6)' type="file" name="image6" value="">
              <div id = 'image-preview6' class="add-image rounded d-block mx-auto">
                <button id = 'del6' onclick = "removeImage(6)" class = 'fas fa-times-circle btn ml-auto p-1 cancel-btn' type="button" name="button"></button>
                <button id = 'add6' onclick = "clickDefault(6)" class = 'custom-add mx-auto my-2 btn' type="button" name="button"> <i class = 'fas fa-file-image'></i><i class = 'fas fa-plus'></i> </button>
              </div>
            </div>
            {% endif %}

          </div>
          <small>
            <small class = 'font-weight-bold'>Image added in the first slot will appear in your post.</small>
          </small>

          <div class="my-3">
            <input id = 'title' class = 'form-control text-field' type="text" name="title" value="{{home.title}}" placeholder = 'Title'> 
          </div>

          <div class="my-3">
            <input id = 'price' class = 'form-control text-field' type="number" name="price" value="{{home.price}}" placeholder = 'Monthly Price'>
          </div>

          <div class="my-3">
            <input id = 'search_input_address' class = 'form-control text-field d-none' type="text" name="address" value="{{home.address}}" placeholder = 'Property Address'>
          </div>
          <div class="my-3 row">
            <div class="col-sm-6">
              <input id = 'lat' class = 'form-control text-field d-none' type="text" name="lat" value="{{home.lat}}" placeholder = 'Latitude'>
            </div>
            
            <div class="col-sm-6">
              <input id = 'lon' class = 'form-control text-field d-none' type="text" name="lon" value="{{home.lon}}" placeholder = 'Longitude'>
            </div>
          </div>

          <div >
            <small><small class = 'font-weight-bold'>Mark your property location in the map</small></small>
            <div class = 'mt-1 rounded shadow' id="setmap" style="height: 500px; width: 100%;"></div>
          </div>

          <hr>
          <div class="">
            <p>What services does your home provide?</p>
            <div class="row">

              <div class="mt-2 col-md-3 col-sm-4">
                {% if home.services.internet %}
                <input id = 'internet' type="checkbox" name="services" value="Internet" checked>
                {% else %}
                <input id = 'internet' type="checkbox" name="services" value="Internet">
                {% endif %}
                <label for="internet" class = 't-sm'>Internet</label>
              </div>

              <div class="mt-2 col-md-3 col-sm-4">
                {% if home.services.parking %}
                <input id = 'parking' type="checkbox" name="services" value="Parking" checked>
                {% else %}
                <input id = 'parking' type="checkbox" name="services" value="Parking">
                {% endif %} 
                <label for="parking" class = 't-sm'>Parking</label>
              </div>

              <div class="mt-2 col-md-3 col-sm-4">
                {% if home.services.water %}
                <input id = 'water' type="checkbox" name="services" value="Water" checked>
                {% else %}
                <input id = 'water' type="checkbox" name="services" value="Water">
                {% endif %} 
                <label for="water" class = 't-sm'>Water 24/7</label>
              </div>

            </div>
            <div>
              <textarea form = 'p-form' class = 'form-control' name="additional_features" rows = '4'>{{home.services.additional_s}}</textarea>
              <p class = 'm-0 p-desc'>You can describe additional features of your property in this field.</p>
            </div>
          </div>
          <hr>
          <div class="my-3">
            <p class = 'p-0 m-0'>Property Rules</p>
            <div class="px-2">
              <label for="cats" class = 't-sm'>Cats Allowed</label>
              {% if home.rules.cat_friendly %}
              <input id = 'cats' type="checkbox" name="rules" value="Cat Allowed" checked>
              {% else %}
              <input id = 'cats' type="checkbox" name="rules" value="Cat Allowed">
              {% endif %}
            </div>
            <div class="px-2">
              <label for="dogs" class = 't-sm'>Dogs Allowed</label>
              {% if home.rules.dog_friendly %}
              <input id = 'dogs' type="checkbox" name="rules" value="Dog Allowed" checked>
              {% else %}
              <input id = 'dogs' type="checkbox" name="rules" value="Dog Allowed">
              {% endif %}
            </div>

            <div class="px-2">
              <label for="dogs" class = 't-sm'>Smoking Allowed</label>
              {% if home.rules.smoking_allowed %}
              <input id = 'dogs' type="checkbox" name="rules" value="Smoking Allowed" checked>
              {% else %}
              <input id = 'dogs' type="checkbox" name="rules" value="Smoking Allowed">
              {% endif %}
            </div>
            <div class=''>
              <textarea form = 'p-form' class = 'form-control' name="additional_rules" rows = '4'>{{home.rules.additional_r}}</textarea>
              <p class = 'm-0 p-desc'>You can describe additional rules around your property premises.</p>
            </div>
          </div>

          
        <textarea form = 'p-form' class = 'form-control' name="description" rows = '8'>{{home.description}}</textarea>
        <p class = 'm-0 p-desc'>Include details like property rules, amentities, payment processes and further details you may want to add.</p>

          <button class = 'btn btn-sm btn-primary my-3' type = 'submit'>Done</button>

        </form>
        </div>
        </div>

        <script src = "{% static 'scripts/hostel.js' %}" type="text/javascript"></script>
{% include 'footer.html' %}
{% endblock %}

{% block scripts %}
<script src = "{% static 'scripts/map.js' %}"></script>
{% endblock %}
